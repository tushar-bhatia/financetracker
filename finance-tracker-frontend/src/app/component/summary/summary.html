<div class="finance-dashboard">

  <!-- Monthly Finance Table -->
  <section class="card">
    <header class="card-header">
      <h2 class="card-title">üìä Monthly Overview</h2>
    </header>

    <div class="table-container">
      <table class="finance-table">
        <thead>
          <tr>
            <th>Month</th>
            <th>Income</th>
            <th>Expense</th>
            <th>Balance</th>
            <th>Details</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let month of months">
            <td class="font-medium">{{ month }}</td>
            <td class="text-income">{{ summary.get(month)!.income | currency:'INR' }}</td>
            <td class="text-expense">{{ summary.get(month)!.expense | currency:'INR' }}</td>
            <td [ngClass]="summary.get(month)!.balance >= 0 ? 'text-positive' : 'text-negative'">
              {{ summary.get(month)!.balance | currency:'INR' }}
            </td>
            <td>
              <button class="icon-btn" title="View Category Breakdown" (click)="openCategoryChart(month)">
                üëÅ
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Charts Section -->
  <section class="card">
    <header class="card-header">
      <h2 class="card-title">üìà Analytics</h2>
    </header>

    <div class="chart-grid">
      <!-- Income vs Expense -->
      <div class="chart-wrapper">
        <h3 class="chart-title">Income vs Expense</h3>
        <canvas baseChart [data]="incomeExpenseData" [options]="chartOptions" chartType="bar"></canvas>
      </div>

      <!-- Balance Growth -->
      <div class="chart-wrapper">
        <h3 class="chart-title">Balance Growth</h3>
        <canvas baseChart [data]="balanceData" [options]="chartOptions" chartType="line"></canvas>
      </div>
    </div>
  </section>

  <!-- Modal for Category Expense Pie Chart -->
  <div class="modal" *ngIf="selectedMonth">
    <div class="modal-overlay" (click)="closeCategoryChart()"></div>
    <div class="modal-content">
      <header class="modal-header">
        <h2>Category Expenses - {{ selectedMonth }}</h2>
        <button class="close-btn" (click)="closeCategoryChart()">&times;</button>
      </header>

      <div class="chart-wrapper">
        <canvas baseChart [data]="categoryData" [options]="chartOptions" chartType="pie"></canvas>
      </div>
    </div>
  </div>

</div>
